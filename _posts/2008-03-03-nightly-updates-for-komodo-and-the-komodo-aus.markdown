---
layout: post
title: nightly updates for Komodo (and the Komodo AUS)
date: 2008-03-03T05:00:00.009-08:00
published: true
categories: [install, komodo, activestate, mozilla]
---

<p>I and others here have been hard at work on Komodo 4.3 (due to go final this week) so it has been a while since I've posted. One thing I've wanted to post about for quite a while is the Komodo auto-update system. I <a href="http://trentmick.blogspot.com/2007/05/building-msi-patch-packages-msp-with_695.html">alluded to it</a> waaay back when working on adding auto-update support to Komodo 4.2 but haven't written anything about it since.</p><p>Last Friday gives me good reason to post about it: <strong>We now have a "nightly" channel for Komodo Edit!</strong></p><p><strong>Update (4-Nov-2008): Nightly updates should not work for Komodo IDE as well!</strong></p><h2>Komodo Auto-update channels</h2><p>There are three Komodo auto-update "channels":</p><ol><li><p>"release": This is the typical (and default) channel for installations of a final release of Komodo (e.g. 4.2.0, 4.2.1, 4.3.0). On this channel, Komodo will only update itself to the latest <em>final</em> Komodo release.</p></li>
<li><p>"beta": This is the typical (and default) channel for Komodo alpha/beta builds. On this channel, Komodo will update itself to the final or pre-release (i.e. alphas and betas).</p></li>
<li><p>"nightly": This is a channel that I finally got working on the server-side on Friday. Since the announcement of <a href="http://www.openkomodo.com/">OpenKomodo</a> and open sourcing of Komodo Edit we've been doing "nightly" builds of Komodo Edit (built on <em>most</em> nights :). These are publicly available here: <a href="http://downloads.openkomodo.com/komodoedit/nightly/">http://downloads.openkomodo.com/komodoedit/nightly/</a></p></li>
</ol><p><strong>As of last Friday, if you are on the nightly update channel Komodo Edit will update to the latest nightly build.</strong> These are quite a bit more burning-edge that the "beta" channel. Often the only criteria for putting up a nightly is that the build worked for all platforms. So, occasionally some features are broken -- though I think we do pretty well.</p><p>This channel is quite new for us though, so there may be some growing pains in the first couple of weeks. Please <a href="http://bugs.activestate.com/enter_bug.cgi?product=Komodo&amp;component=Update">let me know</a> if you have any problems with it. I think it will be pretty cool to easily always be running the very latest Komodo Edit.</p><p>At this time we aren't yet doing public nightlies of Komodo IDE.</p><h2>Setting the update channel for your Komodo installation</h2><p>Currently there isn't a prefs panel in Komodo to tweak auto-update settings -- such as the channel you are one. There should be. I hope to get one in sometime after 4.3.0.</p><p>To set your Komodo channel edit "channel-prefs.js" in your Komodo installation as appropriate. On Windows and Linux this file is here:</p><pre><code>INSTALLDIR/lib/mozilla/defaults/pref/channel-prefs.js
</code></pre><p>and on Mac OS X here:</p><pre><code>INSTALLDIR/Contents/MacOS/defaults/pref/channel-prefs.js
</code></pre><p>It is a very simple file that looks like this:</p><pre><code>// Valid values are "release", "beta" and "nightly" (internal-only).
pref("app.update.channel", "beta");
</code></pre><p>Happily that "internal-only" is no longer correct for Komodo Edit.</p><p><strong>Update (4-Nov-2008): Ditto for Komodo IDE now.</strong></p><h2>Other Komodo AUS Stuff</h2><p>Komodo's auto-update system, on the client side (i.e. the app), pretty much just uses the excellent Mozilla auto-update system. On the server-side we have our own (very simple) <a href="http://www.djangoproject.com/">Django</a>-based update server. On the build-side, we have our own Python scripts (<a href="http://grok.openkomodo.com/source/xref/openkomodo/trunk/util/mozupdate.py">mozupdate.py</a> et al) for building all relevant partial and complete update packages as part of full builds.</p><p>I hope to post more about our AUS server and about our build tools. I think I could fairly easily package up our tools to provide a possible answer to <a href="https://bugzilla.mozilla.org/show_bug.cgi?id=415181">Mozilla Bug 415181</a> (Package the MAR generation tools for easy external usage).</p><p>There used to be an open bug (found it: <a href="https://bugzilla.mozilla.org/show_bug.cgi?id=375752">Mozilla Bug 375752</a>) to convert some of the Bash shell scripts for Mozilla update package building to Python scripts. I see (by way of <a href="https://bugzilla.mozilla.org/show_bug.cgi?id=410806">Mozilla Bug 410806</a>) that that has at least partially happened with <code>make_incremental_updates.py</code>.</p>